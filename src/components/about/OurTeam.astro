---
import { teamMembers } from '@data/teamMembers';
---

<script>
    import Swiper from "swiper";
    import { Pagination, Autoplay } from "swiper/modules";
    import "swiper/css";
    import "swiper/css/pagination";

    document.addEventListener('astro:page-load', () => {
        const swiper = new Swiper(".swiper-team", {
            modules: [Pagination, Autoplay],

            direction: "horizontal",
            loop: true,
            
            slidesPerView: 1,
            spaceBetween: 10,
            
            breakpoints: {
                480: {
                    slidesPerView: 2,
                    spaceBetween: 20
                },
                768: {
                    slidesPerView: 3,
                    spaceBetween: 20
                },
                1024: {
                    slidesPerView: 4,
                    spaceBetween: 30
                }
            },
            
            autoplay: {
                delay: 4000,
                disableOnInteraction: false,
            },
            autoHeight: false,
            centeredSlides: true,

            pagination: {
                el: ".swiper-pagination-team",
                clickable: true,
                dynamicBullets: true,
            }
        });
    });
</script>

<style>
    .swiper-team {
        width: 100%;
        max-width: 1800px;
        height: 420px;
        overflow: hidden;
        position: relative;
        margin-bottom: 20px;
    }

    @media (min-width: 768px) {
        .swiper-team {
            height: 480px;
        }
    }

    .swiper-slide {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        padding: 10px 0;
    }

    .swiper-slide-active > div {
        transform: scale(1.08);
        transition: transform 1.5s ease;
    }

    @media (min-width: 768px) {
        .swiper-slide-active > div {
            transform: scale(1.12);
        }
    }

    .swiper-slide > div {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 90%;
    }

    .team-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        padding: 5px;
        height: 100%;
        width: 100%;
        max-width: 300px;
        max-height: 340px;
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

    .member-image {
        width: 100%;
        height: auto;
        max-width: 120px;
        border-radius: 50%;
        aspect-ratio: 1/1;
        margin-top: -20px;
        object-fit: cover;
        border: 3px solid #f8f8f8;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .member-info {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 0 10px;
    }

    .member-name {
        font-weight: bold;
        color: #333;
        font-size: 1.125rem;
        margin-bottom: 4px;
    }

    .member-title {
        color: #666;
        font-size: 0.875rem;
        margin-bottom: 8px;
    }

    .member-description {
        color: #777;
        font-size: 0.85rem;
        line-height: 1.4;
        margin-bottom: 10px;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .social-links {
        display: flex;
        gap: 12px;
        margin-top: 8px;
    }

    .social-link {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background-color: #f0f0f0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #555;
        transition: all 0.3s ease;
    }

    .social-link:hover {
        background-color: #e0e0e0;
        color: #333;
    }

    .swiper-pagination-team {
        bottom: 5px !important;
    }
</style>

<section class="px-4 py-16 ">
    <div class="text-center mb-12">
        <p class="text-sm uppercase text-gray-500">Conoce a nuestro equipo</p>
        <h2 class="text-4xl mb-4">Nuestro equipo</h2>
        <p class="text-base text-gray-600">
            Un grupo de profesionales dedicados a la excelencia.
        </p>
    </div>

    <div class="swiper swiper-team">
        <div class="swiper-wrapper">
            {teamMembers.map((member) => (
                <div class="swiper-slide">
                    <div class="flex flex-col items-center justify-center">
                        <div class="team-container">
                            {member.image ? (
                                <img 
                                    class="member-image" 
                                    src={member.image} 
                                    alt={member.name}
                                    loading="lazy" 
                                />
                            ) : (
                                <div class="member-image bg-gray-200 flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                    </svg>
                                </div>
                            )}
                            
                            <div class="member-info">
                                <h3 class="member-name">{member.name}</h3>
                                <p class="member-title">{member.title}</p>
                                <p class="member-description">{member.description}</p>
                                
                        
                            <div class="social-links">
                                {member.social.linkedin && (
                                    <a
                                    href={member.social.linkedin}
                                    class="social-link"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    >
                                    <i class="fab fa-linkedin h-4 w-4 text-main-blue-dark"></i>
                                    </a>
                                )}
                                {member.social.twitter && (
                                    <a
                                    href={member.social.twitter}
                                    class="social-link"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    >
                                    <i class="fab fa-twitter h-4 w-4 text-main-blue-dark"></i>
                                    </a>
                                )}
                                {member.social.website && (
                                    <a
                                    href={member.social.website}
                                    class="social-link"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    >
                                    <i class="fas fa-globe h-4 w-4 text-main-blue-dark"></i>
                                    </a>
                                )}
                            </div>

                            </div>
                        </div>
                    </div>
                </div>
            ))}
        </div>
        <div class="swiper-pagination swiper-pagination-team"></div>
    </div>
</section>